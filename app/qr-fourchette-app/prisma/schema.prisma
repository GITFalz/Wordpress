generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://qrfour_app_USER:TyM5W28Got75@cs11693-001.eu.clouddb.ovh.net:35415/qrfour_app?charset=utf8mb4"
}

model qrf_roles {
  id             BigInt           @id @default(autoincrement())
  name           String           @unique(map: "name") @db.VarChar(50)
  description    String?          @db.Text
  qrf_user_roles qrf_user_roles[]
}

model qrf_user_roles {
  user_id   BigInt
  role_id   BigInt
  qrf_users qrf_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "qrf_user_roles_ibfk_1")
  qrf_roles qrf_roles @relation(fields: [role_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "qrf_user_roles_ibfk_2")

  @@id([user_id, role_id])
  @@index([role_id], map: "role_id")
}

model qrf_users {
  id             BigInt           @id @default(autoincrement())
  username       String           @unique(map: "username") @db.VarChar(50)
  email          String           @unique(map: "email") @db.VarChar(100)
  password_hash  String           @db.Text
  created_at     DateTime?        @default(now()) @db.DateTime(0)
  prenom         String?          @db.VarChar(255)
  nom            String?          @db.VarChar(255)
  nom_affiche    String?          @db.VarChar(255)
  qrf_categories qrf_categories[]
  qrf_menus      qrf_menus[]
  qrf_settings   qrf_settings[]
  qrf_user_roles qrf_user_roles[]
}

model qrf_menus {
  id          BigInt    @id @default(autoincrement())
  name        String    @db.VarChar(255)
  description String    @db.Text
  entrees     String    @db.Text
  plats       String    @db.Text
  desserts    String    @db.Text
  number      Int
  user_id     BigInt
  qrf_users   qrf_users @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "qrf_user_menus_ibfk_1")

  @@index([user_id], map: "qrf_user_menus_ibfk_1")
}

model qrf_categories {
  id          BigInt      @id @default(autoincrement())
  name        String      @db.VarChar(255)
  description String      @db.Text
  user_id     BigInt
  number      Int
  icon        String?     @db.VarChar(255)
  traduisible Boolean     @default(false)
  qrf_users   qrf_users   @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "qrf_user_categories_ibfk_1")
  qrf_plats   qrf_plats[]

  @@index([user_id], map: "qrf_user_categories_ibfk_1")
}

model qrf_plats {
  id              BigInt            @id @default(autoincrement())
  name            String            @db.VarChar(255)
  description     String            @db.Text
  prix            Decimal           @db.Decimal(10, 2)
  traduisible     Boolean           @default(false)
  image           String            @db.VarChar(255)
  categorie_id    BigInt
  number          Int
  qrf_plat_labels qrf_plat_labels[]
  qrf_categories  qrf_categories    @relation(fields: [categorie_id], references: [id], onDelete: Cascade, map: "qrf_categories_plats_ibfk_1")

  @@index([categorie_id], map: "qrf_categories_plats_ibfk_1")
}

model qrf_settings {
  value        String    @db.Text
  id           BigInt    @id @default(autoincrement())
  settings_key String    @db.VarChar(255)
  user_id      BigInt
  category     String    @db.VarChar(255)
  qrf_users    qrf_users @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "qrf_user_settings_ibfk_1")

  @@index([user_id], map: "qrf_user_settings_ibfk_1")
}

model qrf_langues {
  langue            String              @db.VarChar(255)
  code              String              @id @db.VarChar(10)
  qrf_langues_carte qrf_langues_carte[]
}

model qrf_langues_carte {
  id          BigInt      @id @default(autoincrement())
  user_id     BigInt
  code        String      @db.VarChar(10)
  number      Int
  langue      String      @db.VarChar(255)
  qrf_langues qrf_langues @relation(fields: [code], references: [code], onDelete: Cascade, map: "qrf_code_langues_ibfk_1")

  @@index([code], map: "qrf_code_langues_ibfk_1")
}

model qrf_fonts {
  id       Int     @id @default(autoincrement())
  name     String  @unique(map: "name") @db.VarChar(100)
  category String? @db.VarChar(50)
  url      String  @db.Text
}

model qrf_labels {
  id              Int               @id @default(autoincrement())
  name            String            @db.VarChar(100)
  image           String            @db.VarChar(255)
  qrf_plat_labels qrf_plat_labels[]
}

model qrf_plat_labels {
  plat_id    BigInt
  label_id   Int
  qrf_plats  qrf_plats  @relation(fields: [plat_id], references: [id], onDelete: Cascade, map: "qrf_plat_labels_ibfk_1")
  qrf_labels qrf_labels @relation(fields: [label_id], references: [id], onDelete: Cascade, map: "qrf_plat_labels_ibfk_2")

  @@id([plat_id, label_id])
  @@index([label_id], map: "qrf_plat_labels_ibfk_2")
}
